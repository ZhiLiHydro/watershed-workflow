

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data Sources &mdash; Watershed Workflow 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Documentation" href="api.html" />
    <link rel="prev" title="Watershed Workflow scripts" href="scripts.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Watershed Workflow
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/mesh_coweeta.html">Example: mesh a delineated watershed</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Scripts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Sources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-workflow.sources.manager_nhd">Watershed boundaries and hydrography</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-workflow.sources.manager_ned">National Elevation Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-workflow.sources.manager_nlcd">National Land Cover Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-workflow.sources.manager_nrcs">Soils database</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-workflow.sources.manager_shape">Generic shapefiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-workflow.sources.manager_raster">Generic rasters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Watershed Workflow</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Data Sources</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/sources.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="data-sources">
<h1>Data Sources<a class="headerlink" href="#data-sources" title="Permalink to this headline">¶</a></h1>
<p>TODO: A wide range of sources are used.</p>
<div class="section" id="module-workflow.sources.manager_nhd">
<span id="watershed-boundaries-and-hydrography"></span><h2>Watershed boundaries and hydrography<a class="headerlink" href="#module-workflow.sources.manager_nhd" title="Permalink to this headline">¶</a></h2>
<p>Manager for interacting with USGS National Hydrography Datasets.</p>
<p>Hydrography datasets provide surveys of river networks, which form the
spine of watersheds and are where most of the fast-time scale dynamics
occur.  Some hydrologic models (for instance river routing models, dam
operations management models, and many flood models) directly use the
river network as their simulation domain, while others (for instance
the class of integrated, distributed models described here) can use
the river network to refine meshes near the rivers and therefore
improve resolution where fast dynamics are occuring.  Hydrography
datasets are typically available as GIS shapefiles, where each reach
is represented by a set of coordinates along the line.</p>
<p>Watershed Workflow leverages the National Hydrography Dataset, a USGS
and EPA dataset available at multiple resolutions to represent the
river network in United States watersheds, including Alaska <a class="reference internal" href="#rd8e85bc00c57-nhd" id="id1">[NHD]</a>.
Also used is the NHD Plus dataset, an augmented dataset built on
watershed boundaries and elevation products.  By default, the
1:100,000 High Resolution datasets are used.  Data is discovered
through The National Map’s <a class="reference internal" href="#rd8e85bc00c57-tnm" id="id2">[TNM]</a> REST API, which allows querying for
data files organized by HUC and resolution via HTTP POST requests,
providing direct-download URLs.  Files are downloaded on first
request, unzipped, and stored in the data library for future use.
Currently, files are indexed by 4-digit (NHD Plus HR) and 8-digit
(NHD) HUCs.</p>
<table class="docutils citation" frame="void" id="rd8e85bc00c57-nhd" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[NHD]</a></td><td><a class="reference external" href="https://www.usgs.gov/core-science-systems/ngp/national-hydrography">https://www.usgs.gov/core-science-systems/ngp/national-hydrography</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="rd8e85bc00c57-tnm" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[TNM]</a></td><td><a class="reference external" href="https://viewer.nationalmap.gov/help/documents/TNMAccessAPIDocumentation/TNMAccessAPIDocumentation.pdf">https://viewer.nationalmap.gov/help/documents/TNMAccessAPIDocumentation/TNMAccessAPIDocumentation.pdf</a></td></tr>
</tbody>
</table>
<p>Once these shapefiles are available on the local machine, they are
loaded into a list of reaches, and then processed into a list of
tree-based data structures, with one for each outlet which terminates
on or within the watershed boundary.  While a tree assumes that rivers
only merge as they move downstream, we have found this to be
sufficient (despite implications for high resolution data in braided
stream networks).  This merging of line segments to form a tree is
done through kd-tree, nearest-neighbor algorithms which allow
efficient scaling for all HUC levels.  Optionally, river networks are
pruned if they include too few reaches or do not exit the watershed –
this is possible in the case of man-made irrigation canals and other
corner cases.</p>
<p>From this tree network, it is straightforward to accumulate and
analyze river network properties from reach properties provided by the
dataset, such as accumulated drainage area or other values; these
could be used in a workflow.</p>
</div>
<div class="section" id="module-workflow.sources.manager_ned">
<span id="national-elevation-dataset"></span><h2>National Elevation Dataset<a class="headerlink" href="#module-workflow.sources.manager_ned" title="Permalink to this headline">¶</a></h2>
<p>Manager for interacting with NED datasets.</p>
<p>For any distributed, integrated hydrologic model, elevation datasets
are critical.  These set the local spatial gradients that drive flow
in Richards and overload flow equations, and are necessary to form a
mesh, whether structured or unstructured, for simulation.  Elevation
datasets are typically stored as raster images.</p>
<p>Watershed Workflow leverages the USGS’s National Elevation Dataset
(NED), a precursor to and currently part of the USGS’s 3D Elevation
Program (3DEP) <a class="reference internal" href="#r948339ccdcc8-ned" id="id3">[NED]</a>.  It is available seamlessly at a variety of
resolutions ranging from 2 arc-seconds to 1/3 arc-seconds (~60m and
10m, respectively) in the conterminous United States and comparable
resolution through most of Alaska.  Like the NHD data, these datasets
are available through The National Map’s [TNM] REST API, and are
provided in 1-degree tiles.  Watershed Workflow manages querying for
URLs, downloading these tiles on demand, and forming the mosaic of
images through underlying capability in rasterio to provide a single
raster across the watershed requested.  Higher resolution products,
including LiDAR products across the conterminous US and IfSAR products
across Alaska are coming available, but these are not currently
supported by Watershed Workflow.</p>
<table class="docutils citation" frame="void" id="r948339ccdcc8-ned" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[NED]</a></td><td></td></tr>
</tbody>
</table>
<p>Then workflows can query the raster for interpolated elevations at
points on a mesh, river, or other locations of interest.  Internally,
affine coordinate system transformations are hidden; the coordinate
system of the requested points are mapped to that of the raster and
interpolated.  By default, piecewise bilinear interpolation is used to
ensure that extremely high-resolution queries do not look
stairstepped; this improves mesh quality in meshes near the resolution
of the underlying elevation dataset.</p>
</div>
<div class="section" id="module-workflow.sources.manager_nlcd">
<span id="national-land-cover-dataset"></span><h2>National Land Cover Dataset<a class="headerlink" href="#module-workflow.sources.manager_nlcd" title="Permalink to this headline">¶</a></h2>
<p>Manager for interacting with NED datasets.</p>
</div>
<div class="section" id="module-workflow.sources.manager_nrcs">
<span id="soils-database"></span><h2>Soils database<a class="headerlink" href="#module-workflow.sources.manager_nrcs" title="Permalink to this headline">¶</a></h2>
<p>Manager for interacting with National Resources Conservation Service Soil Survey database.</p>
</div>
<div class="section" id="module-workflow.sources.manager_shape">
<span id="generic-shapefiles"></span><h2>Generic shapefiles<a class="headerlink" href="#module-workflow.sources.manager_shape" title="Permalink to this headline">¶</a></h2>
<p>Basic manager for interacting with shapefiles.</p>
</div>
<div class="section" id="module-workflow.sources.manager_raster">
<span id="generic-rasters"></span><h2>Generic rasters<a class="headerlink" href="#module-workflow.sources.manager_raster" title="Permalink to this headline">¶</a></h2>
<p>Basic manager for interacting with raster files.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="API Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="scripts.html" class="btn btn-neutral float-left" title="Watershed Workflow scripts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Ethan Coon

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>